<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Handy Garderobe</title>
    <style>
        body {
            background-color: black;
            font-family: 'Courier New', Courier, monospace; /* Schriftart ähnlich derjenigen in alten Terminals */
            color: #33ff00; /* Das klassische Grün */
            font-size: 16px;
        }

        #titel {
            position: fixed;
            bottom: 10px;
            right: 10px;
            font-size: smaller;
            color: #555;
        }

        h2 {
            border-bottom: 1px solid #33ff00;
        }

        button {
            background-color: black;
            color: #33ff00;
            border: 1px solid #33ff00;
            padding: 5px 10px;
            cursor: pointer;
        }

        button:hover {
            background-color: #1a1a1a;
        }

        ul, table {
            list-style-type: none;
            padding: 0;
        }

        .erreicht::after {
            content: '✓';
            color: #33ff00;
        }

        #miningAnzeigeBereich {
            border: 1px solid #33ff00;
        }

        /* Sie können hier weitere Stile hinzufügen oder anpassen, um das gewünschte Aussehen zu erreichen */
    </style>
</head>
<body>
    <div id="titel">
        HandyGarberobe 1.0<br>
        Idea by Carla & dudagroup.com coded by an AI
    </div>

    <!-- Hier Ihr Formular und andere HTML-Elemente -->
    <div id="eingabeBereich">
        <input type="number" id="nummerEingabe" placeholder="Nummer eingeben" required>
        <button onclick="nummerHinzufuegen()">It's MINE</button>
    </div>

    <h2>Aktuelle Liste</h2>
    <ul id="nummerListe"></ul>

    <h2>Erledigte Einträge</h2>
    <table id="erledigteListe">
        <thead>
            <tr>
                <th>Nummer</th>
                <th>THRPYECES</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            <!-- Abgeschlossene Einträge werden hier aufgelistet -->
        </tbody>
    </table>

    <div id="miningAnzeigeBereich" style="position: fixed; top: 20px; right: 20px; padding: 20px; border: 1px solid black;">
        <h2>Mining</h2>
        <div id="aktiveNummerAnzeige">--</div>
        <div id="aktiveZeitAnzeige">Zeit: --</div>
        <div id="aktiveThrapyecesAnzeige">THRPYECES: --</div>
    </div>

    <script>
        // Variableninitialisierung und Logik für Ihre Anwendung...
        let nummernDaten = []; // Dies speichert die Daten für Ihre Nummern
        let zielZeitInMillisekunden = 14400000; // Standard sind 4 Stunden in Millisekunden für das Timer-Ziel
        let miningAnzeigeTimer = null;

        // Diese Funktion speichert den aktuellen Stand im lokalen Speicher
        function speichernInLocalStorage() {
            const daten = {
                nummern: nummernDaten,
                zielZeit: zielZeitInMillisekunden
            };
            localStorage.setItem('handyGarderobeDaten', JSON.stringify(daten));
        }

        // Diese Funktion lädt den Stand aus dem lokalen Speicher
        function ladenAusLocalStorage() {
            const gespeicherteDaten = localStorage.getItem('handyGarderobeDaten');
            if (gespeicherteDaten) {
                const daten = JSON.parse(gespeicherteDaten);
                nummernDaten = daten.nummern;
                zielZeitInMillisekunden = daten.zielZeit;
                listeAktualisieren(); // Wir aktualisieren unsere Liste basierend auf den geladenen Daten
            }
        }

        // Funktion zur Handhabung des Hinzufügens einer neuen Nummer
        function nummerHinzufuegen() {
            // Zufällige Nummer für den Demonstrationszweck generieren
            const nummer = Math.floor(Math.random() * 1000000);
            const thrapyecesStartwert = 1000000; // Standardwert

            if (nummer) {
                const neueNummer = {
                    nummer: nummer,
                    erfassungszeit: new Date(),
                    thrapyeces: parseInt(thrapyecesStartwert, 10) // Umwandlung der Zeichenkette in eine Zahl
                };

                nummernDaten.push(neueNummer);
                listeAktualisieren();
                speichernInLocalStorage(); // Speichern des neuen Zustands im lokalen Speicher
            } else {
                alert('Bitte eine gültige Nummer eingeben.');
            }
        }

        // Funktion zur Aktualisierung der auf der Website angezeigten Liste
        function listeAktualisieren() {
            const nummerListe = document.getElementById('nummerListe');
            nummerListe.innerHTML = ''; // Aktuelle Liste löschen

            nummernDaten.forEach((nummerDaten, index) => {
                const zeitDiff = new Date() - new Date(nummerDaten.erfassungszeit);
                const verbleibendeZeit = zielZeitInMillisekunden - zeitDiff;

                // Hier können Sie die Farbe basierend auf der verbleibenden Zeit anpassen
                let prozentErreicht = (zeitDiff / zielZeitInMillisekunden) * 100;
                let farbe = 'rgb(' + (100 - prozentErreicht) + '%, ' + prozentErreicht + '%, 0%)';

                // THRPYECES berechnen basierend auf der vergangenen Zeit
                nummerDaten.thrapyeces += zeitDiff / zielZeitInMillisekunden * thrapyecesStartwert;

                const listItem = document.createElement('li');
                listItem.innerHTML = `Nummer: ${nummerDaten.nummer}, THRPYECES: ${nummerDaten.thrapyeces.toFixed(0)}, Verbleibende Zeit: ${new Date(verbleibendeZeit).toISOString().substr(11, 8)}`;
                listItem.style.color = farbe;

                // Wenn die Aufgabe erledigt ist, fügen wir eine bestimmte Klasse für das Styling hinzu
                if (verbleibendeZeit <= 0 && nummerDaten.thrapyeces >= 1000000) {
                    listItem.classList.add('erreicht');
                    erledigteEintraegeHinzufuegen(nummerDaten);
                    nummernDaten.splice(index, 1);
                }

                nummerListe.appendChild(listItem);
            });

            speichernInLocalStorage();
        }

        // Laden der gespeicherten Daten und initialisieren des Mining-Anzeige-Bereichs beim Laden der Seite
        document.addEventListener('DOMContentLoaded', (event) => {
            ladenAusLocalStorage();
            startMiningAnzeige();
        });

        function erledigteEintraegeHinzufuegen(nummerDaten) {
            const erledigteListeBody = document.getElementById('erledigteListe').querySelector('tbody');
            const neueZeile = erledigteListeBody.insertRow();
            const zelleNummer = neueZeile.insertCell(0);
            const zelleThrapyeces = neueZeile.insertCell(1);
            const zelleStatus = neueZeile.insertCell(2);

            zelleNummer.textContent = nummerDaten.nummer;
            zelleThrapyeces.textContent = nummerDaten.thrapyeces;
            zelleStatus.textContent = 'Done';
        }

        function startMiningAnzeige() {
            if (miningAnzeigeTimer) {
                clearInterval(miningAnzeigeTimer);
            }

            miningAnzeigeTimer = setInterval(() => {
                if (nummernDaten.length > 0) {
                    const randomIndex = Math.floor(Math.random() * nummernDaten.length);
                    const zufaelligeNummerDaten = nummernDaten[randomIndex];

                    document.getElementById('aktiveNummerAnzeige').textContent = zufaelligeNummerDaten.nummer;
                    document.getElementById('aktiveZeitAnzeige').textContent = 'Zeit: ' + (new Date() - new Date(zufaelligeNummerDaten.erfassungszeit)) / 1000 + ' Sekunden';
                    document.getElementById('aktiveThrapyecesAnzeige').textContent = 'THRPYECES: ' + zufaelligeNummerDaten.thrapyeces;
                }
            }, 5000);
        }
    </script>
</body>
</html>
